<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Login</title>
<script src="https://accounts.google.com/gsi/client" async defer></script>
<script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>
<style>
body {
  margin: 0;
  background: #1e1e1e;
  color: white;
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}
#login-popup {
  background: #2e2e2e;
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 0 15px rgba(0,0,0,0.5);
}
h2 {
  margin-bottom: 20px;
}
</style>
</head>
<body>

<div id="login-popup">
  <h2>Login untuk memulai menambang</h2>
  <div id="g_id_onload"
      data-client_id="214703140470-6t2qfe8mv6bejcidkk0as7p024qjuoqi.apps.googleusercontent.com"
      data-callback="handleCredentialResponse"
      data-auto_prompt="false">
  </div>
  <div class="g_id_signin"
      data-type="standard"
      data-size="large"
      data-theme="outline"
      data-text="sign_in_with"
      data-shape="rectangular"
      data-logo_alignment="left">
  </div>
</div>

<script>
  // jika sudah login, langsung pindah
  if (localStorage.getItem('user')) {
    window.location.href = 'beranda.html';
  }

  function handleCredentialResponse(response) {
    const data = jwt_decode(response.credential);

    const user = {
      id: data.sub,
      name: data.name,
      email: data.email,
      picture: data.picture,
      locale: data.locale || 'US'
    };

    // simpan user
    localStorage.setItem('user', JSON.stringify(user));

    // buat data player jika belum ada
    if (!localStorage.getItem('playerData')) {
      localStorage.setItem(
        'playerData',
        JSON.stringify({
          saldo: 0,
          bisnis: 0,
          properti: 0,
          kendaraan: 0,
          koleksi: 0,
          nft: 0
        })
      );
    }

    window.location.href = 'beranda.html';
  }
</script>

</body>
</html>
